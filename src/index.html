<!doctype html>
<html>
  <head>
      <meta charset="utf-8">
      <title>OGS</title>

      <meta name="viewport" content="width=device-width">
      <meta name="apple-mobile-web-app-capable" content="yes">
      <meta name="format-detection" content="telephone=no">
      <meta name="application-name" content="Online-Go.com"/>

      <link rel="shortcut icon" href="https://cdn.online-go.com/icons/favicon.ico" type="image/x-icon" />
      <link rel="apple-touch-icon" sizes="57x57" href="https://cdn.online-go.com/icons/apple-touch-icon-57x57.png">
      <link rel="apple-touch-icon" sizes="60x60" href="https://cdn.online-go.com/icons/apple-touch-icon-60x60.png">
      <link rel="apple-touch-icon" sizes="72x72" href="https://cdn.online-go.com/icons/apple-touch-icon-72x72.png">
      <link rel="apple-touch-icon" sizes="76x76" href="https://cdn.online-go.com/icons/apple-touch-icon-76x76.png">
      <link rel="apple-touch-icon" sizes="114x114" href="https://cdn.online-go.com/icons/apple-touch-icon-114x114.png">
      <link rel="apple-touch-icon" sizes="120x120" href="https://cdn.online-go.com/icons/apple-touch-icon-120x120.png">
      <link rel="apple-touch-icon" sizes="144x144" href="https://cdn.online-go.com/icons/apple-touch-icon-144x144.png">
      <link rel="apple-touch-icon" sizes="152x152" href="https://cdn.online-go.com/icons/apple-touch-icon-152x152.png">
      <link rel="apple-touch-icon" sizes="180x180" href="https://cdn.online-go.com/icons/apple-touch-icon-180x180.png">
      <link rel="icon" type="image/png" href="https://cdn.online-go.com/icons/favicon-16x16.png" sizes="16x16">
      <link rel="icon" type="image/png" href="https://cdn.online-go.com/icons/favicon-32x32.png" sizes="32x32">
      <link rel="icon" type="image/png" href="https://cdn.online-go.com/icons/favicon-96x96.png" sizes="96x96">
      <link rel="icon" type="image/png" href="https://cdn.online-go.com/icons/android-chrome-192x192.png" sizes="192x192">
      <meta name="apple-mobile-web-app-status-bar-style" content="black">
      <meta name="msapplication-square70x70logo" content="https://cdn.online-go.com/icons/smalltile.png" />
      <meta name="msapplication-square150x150logo" content="https://cdn.online-go.com/icons/mediumtile.png" />
      <meta name="msapplication-wide310x150logo" content="https://cdn.online-go.com/icons/widetile.png" />
      <meta name="msapplication-square310x310logo" content="https://cdn.online-go.com/icons/largetile.png" />
      <meta name="msapplication-TileColor" content="#DDB06D" />
      <meta name="msapplication-TileImage" content="https://cdn.online-go.com/icons/apple-touch-icon-144x144.png" />

      <meta property="og:site_name" content="online-go.com" />
      <meta property="og:type" content="website" />
      <meta property="og:title" content="{{OG_TITLE}}" />
      <meta property="og:url" content="{{OG_URL}}" />
      <meta property="og:image" content="{{OG_IMAGE}}" />
      <meta property="og:description" content="{{OG_DESCRIPTION}}" />


      <style>
          html {
              touch-action: manipulation;
          }
          body, input, select, button {
              font-family: "Nunito", sans-serif;
              font-size: 12pt;
              font-weight: 400;
          }
          #em10 {
              position: absolute;
              top: -1px;
              height: 1px;
              width: 10em;
              display: inline block;
          }
          #main-content {
              display: none;
          }
          body.dark {
              background-color: #1A1A1A;
          }
          body.light {
              background-color: #ffffff;
          }
      </style>
      {{EXTRA_CONFIG}}
  </head>
  <body>
      <script>
        try {
            document.body.className = JSON.parse(localStorage.getItem('ogs.theme') || '"light"');
        } catch (e) {
            console.error(e);
            document.body.className = "light";
        }
      </script>
      <div id="em10"></div>
      <div id="main-content"></div>
      <div id="toast-container"></div>


      <noscript id="deferred-styles">
          <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Nunito:400,400i,700|Source+Code+Pro&amp;subset=latin-ext">
          <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/css-social-buttons/1.2.0/css/zocial.min.css">
          <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css">
          <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/fixed-data-table/0.6.3/fixed-data-table.min.css">
          <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.0.1/sweetalert2.min.css">
          <link rel="stylesheet" type="text/css" href="{{CDN_SERVICE}}/{{RELEASE}}/ogs.{{VERSION_DOTCSS}}">
      </noscript>
      <script>
          var loadDeferredStyles = function() {
            var addStylesNode = document.getElementById("deferred-styles");
            var replacement = document.createElement("div");
            replacement.innerHTML = addStylesNode.textContent;
            document.body.appendChild(replacement)
            addStylesNode.parentElement.removeChild(addStylesNode);
          };
          var raf = requestAnimationFrame || mozRequestAnimationFrame ||
              webkitRequestAnimationFrame || msRequestAnimationFrame;
          if (raf) raf(function() { window.setTimeout(loadDeferredStyles, 0); });
          else window.addEventListener('load', loadDeferredStyles);
      </script>

      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/es6-promise/4.0.5/es6-promise.auto{{MIN}}.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/es6-shim/0.35.3/es6-shim{{MIN}}.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery{{MIN}}.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/1.5.1/socket.io{{MIN}}.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.16.0/moment-with-locales{{MIN}}.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/redux/3.6.0/redux{{MIN}}.js"></script>

      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.1/react{{MIN}}.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/react/15.4.1/react-dom{{MIN}}.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/react-router/2.8.1/ReactRouter{{MIN}}.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/react-redux/4.4.6/react-redux{{MIN}}.js"></script>

      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/blueimp-md5/2.5.0/js/md5{{MIN}}.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/eventemitter3/2.0.2/index{{MIN}}.js"></script>

      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot{{MIN}}.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.navigate{{MIN}}.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.resize{{MIN}}.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/flot/0.8.3/jquery.flot.time{{MIN}}.js"></script>

      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/6.0.1/sweetalert2{{MIN}}.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/8.3.1/markdown-it{{MIN}}.js"></script>
      <script defer src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.4.0/d3{{MIN}}.js"></script>


      <script type="text/javascript">
        var ogs_version='{{VERSION}}';
        var ogs_release='{{RELEASE}}';
        var ogs_language_version='{{LANGUAGE_VERSION}}';
        var cdn_service = '{{CDN_SERVICE}}';

        /* Detect prefered language {{{ */
        var supported_languages = {
            "en": true, 
            //"eo": true,
            "fi": true,
            "fr": true,
            "de": true,
            "it": true,
            "ja": true,
            "pl": true,
            "pt": true,
            "ro": true,
            "ru": true,
            "es": true,
            "sv": true,
            "ru": true,
            "nl": true,
            //"zh": true,
            "zh-cn": true,
            "debug": true,
        };

        function isSupportedLanguage(lang) {
            if (!lang) {
                return null;
            }

            lang = lang.toLowerCase();

            if (lang in supported_languages) {
                return lang;
            }

            lang = lang.replace(/-[a-z]+/, '');

            if (lang in supported_languages) {
                return lang;
            }

            return null;
        }

        function getPreferedLanguage() {
            try {
                var set_lang = JSON.parse(localStorage.getItem('ogs.preferences.language') || 'null');
                var lang = isSupportedLanguage(set_lang);
                if (lang) {
                    return lang;
                } else if (set_lang && localStorage.getItem('ogs.preferences.language') != '"auto"') {
                    console.error('User selected language: ', localStorage.getItem('ogs.preferences.language'), 'is not a recognized supported language');
                }
            } catch (e) {
                console.error(e);
            }

            try {
                for (var i=0; i < navigator.languages.length; ++i) {
                    var lang = isSupportedLanguage(navigator.languages[i]);
                    if (lang) {
                        return lang;
                    }
                }
            } catch (e) {
            }

            try {
                return isSupportedLanguage(navigator.language || navigator.userLanguage) || 'en';
            } catch (e) {
            }

            return 'en';
        }


        var ogs_current_language = 'en';
        try {
            ogs_current_language = getPreferedLanguage();
        } catch (e) {
            console.error(e);
        }
        window['ogs_current_language'] = ogs_current_language || 'en';
        /* }}} */

        /* Load our language */
        var language_path = "{{CDN_SERVICE}}/{{RELEASE}}/locale/" + ogs_current_language + ".{{LANGUAGE_VERSION_DOTJS}}";
        language_path = language_path.replace('///', '/'); /* in dev mode, we don't use the cdn or release vars */
        document.write('<script defer src="' + language_path + '"><'+'/script>');
      </script>
      <script defer src="https://cdn.online-go.com/score-estimator/OGSScoreEstimator-0.5.js"></script>
      <script defer src="{{CDN_SERVICE}}/{{RELEASE}}/ogs.{{VERSION_DOTJS}}"></script>


    <!-- Begin Tracking - this can't be disabled at the moment: https://github.com/online-go/online-go.com/issues/29#issuecomment-282551474 -->

      <script type="text/javascript">
        /* Google analytics {{{ */
        if (/online-(go|baduk|weiqi|covay|igo).(com|net)$/.test(document.location.host)/* && !(/beta/.test(document.location.host))*/) {
            console.log("Welcome to OGS");
            (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
                m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
            })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
            ga('create', 'UA-37743954-2', 'online-go.com');
            ga('send', 'pageview');
            window['ga'] = ga;
        } else {
            window['ga'] = null;
            console.log("Dev system detected, disabling google analytics");
        }
        /* }}} */
      </script>

    <!-- Begin comScore -->
    <script type="text/javascript">
    var _comscore = _comscore || [];
    _comscore.push({ c1: "2", c2: "6035118" });
    (function() {
       var s = document.createElement("script"), el = document.getElementsByTagName("script")[0]; s.async = true;
       s.src = (document.location.protocol == "https:" ? "https://sb" : "http://b") + ".scorecardresearch.com/beacon.js";
       el.parentNode.insertBefore(s, el);
    })();
    </script>
    <noscript>
       <img src="http://b.scorecardresearch.com/p?c1=2&amp;c2=6035118&amp;cv=2.0&amp;cj=1" />
    </noscript>
    <!-- End comScore -->

    <!-- Nielsen Online SiteCensus -->
    <script type="text/javascript">
    (function () {
       var d = new Image(1, 1);
       d.onerror = d.onload = function () {
           d.onerror = d.onload = null;
       };
       d.src = ["//secure-us.imrworldwide.com/cgi-bin/m?ci=us-603339h&cg=0&cc=1&si=", escape(window.location.href), "&rp=", escape(document.referrer), "&ts=compact&rnd=", (new Date()).getTime()].join('');
    })();
    </script>
    <noscript>
        <div><img src="//secure-us.imrworldwide.com/cgi-bin/m?ci=us-603339h&amp;cg=0&amp;cc=1&amp;ts=noscript" width="1" height="1" alt="" /></div>
    </noscript>
    <!-- End Nielsen Online SiteCensus -->
    <!-- End Tracking -->

    {{LIVE_RELOAD}}
  </body>
</html>
